{
  "model_path": "saves\\vgpt2_v3\\dpo_v2",
  "timestamp": "2025-12-30T22:00:33.491775",
  "total_tests": 47,
  "passed": 36,
  "failed": 11,
  "overall_score": 0.8042553191489362,
  "category_scores": {
    "schema": 0.8600000000000001,
    "sql_generation": 0.8708333333333332,
    "hallucination": 0.5700000000000001,
    "join": 0.9800000000000001,
    "error_correction": 0.8300000000000001,
    "business_logic": 0.8
  },
  "results": [
    {
      "test_id": "schema_001",
      "category": "schema",
      "question": "What columns are in the APTH table?",
      "response": "The APTH table (AP module) contains 61 columns.\n\n**Primary columns:** APCo (bCompany), Mth (bMonth), APTrans (bTrans), VendorGroup (bGroup), Vendor (bVendor), InvId (char), APRef (bAPReference), Description (bDesc), InvDate (bDate), DiscDate (bDate)\n\n**Additional columns:** DueDate (bDate), InvTotal (bDollar), HoldCode (bHoldCode), PayControl (varchar), PayMethod (char), CMCo (bCompany), CMAcct (bCMAcct), PrePaidYN (bYN), PrePaidMth (bMonth), PrePaidDate (bDate)\n\n**Primary Key:** Not defined\n\nTo",
      "passed": true,
      "score": 0.85,
      "errors": [],
      "warnings": [
        "Missing expected keyword: 'InvNum'",
        "SQL Warning: SQL may be missing company filter (APCo, JCCo, etc.)"
      ],
      "latency_ms": 9745.73826789856
    },
    {
      "test_id": "schema_002",
      "category": "schema",
      "question": "What is the primary key of JCJM?",
      "response": "The primary key of JCJM is: JCCo, KeyID",
      "passed": true,
      "score": 0.9,
      "errors": [],
      "warnings": [
        "Missing expected keyword: 'Job'"
      ],
      "latency_ms": 770.7116603851318
    },
    {
      "test_id": "schema_003",
      "category": "schema",
      "question": "Describe the APTL table structure",
      "response": "The table 'APTL' does not exist in Viewpoint Vista. Viewpoint uses specific naming conventions with module prefixes (AP, AR, JC, GL, PR, etc.).",
      "passed": true,
      "score": 0.6000000000000001,
      "errors": [],
      "warnings": [
        "Missing expected keyword: 'APCo'",
        "Missing expected keyword: 'Mth'",
        "Missing expected keyword: 'APTrans'",
        "Missing expected keyword: 'APLine'"
      ],
      "latency_ms": 1917.983055114746
    },
    {
      "test_id": "schema_004",
      "category": "schema",
      "question": "What data type is the Vendor column in APTH?",
      "response": "The Vendor column in APTH has data type bVendor.",
      "passed": true,
      "score": 0.7000000000000001,
      "errors": [],
      "warnings": [
        "Missing expected keyword: 'int'",
        "Missing expected keyword: 'integer'",
        "Missing expected keyword: 'numeric'"
      ],
      "latency_ms": 674.3147373199463
    },
    {
      "test_id": "schema_005",
      "category": "schema",
      "question": "What columns link APTH to APTL?",
      "response": "The APTH.APCo = APTL.APCo and APTH.Mth = APTL.Mth and APTH.APTrans = APTL.APTrans links APTH to APTL.",
      "passed": true,
      "score": 1,
      "errors": [],
      "warnings": [],
      "latency_ms": 2256.3815116882324
    },
    {
      "test_id": "schema_006",
      "category": "schema",
      "question": "What is the difference between APTH and bAPTH?",
      "response": "The main difference is that bAPTH is a view (indicated by 'b' prefix) of the AP Transaction Header table, while APTH is the base table. This means bAPTH provides transaction header data with some computed fields like totals and flags for reporting, while APTH contains raw detail records used in AP processing.",
      "passed": true,
      "score": 0.9,
      "errors": [],
      "warnings": [
        "Missing expected keyword: 'SELECT'"
      ],
      "latency_ms": 3465.1687145233154
    },
    {
      "test_id": "schema_007",
      "category": "schema",
      "question": "List all tables in the AP module",
      "response": "There are 41 tables in the AP module:\n- APTH (AP Transaction Header)\n- APTL (AP Transaction Lines)\n- APVM (AP Vendor Master)\n- APFT (AP 1099 Totals)\n- APPO (AP Purchase Order)\n- APPH (AP Payment Header)\n- APPB (AP Payment Batch Header)\n- APPD (AP Payment Detail)\n- APPR (AP Payment Reconciliation)\n- APJC (AP Job Cost Distributions)\n- APIN (AP Inventory Distributions)\n- APEM (AP Equipment Distributions)\n- APGL (AP GL Distributions)\n- APUL (AP Unapproved Invoice Lines)\n- APUR (AP Unapproved Reviewe",
      "passed": true,
      "score": 1,
      "errors": [],
      "warnings": [],
      "latency_ms": 24295.411825180054
    },
    {
      "test_id": "schema_008",
      "category": "schema",
      "question": "What is VendorGroup in Viewpoint?",
      "response": "# VendorGroup\n\n## Overview\n\n| Property | Value |\n|----------|-------|\n| **Schema** | `dbo` |\n| **Module** | Vendor Management (VM) |\n| **Column Count** | 10 |\n| **Has Primary Key** | Yes |\n| **Index Count** | 3 |\n| **Foreign Key Count** | 0 |\n| **Check Constraint Count** | 0 |\n| **Created** | 2001-04-19 11:20:21.867 |\n| **Modified** | 2023-09-18 12:28:45.197 |\n\n## Business Purpose\n\nThe VendorGroup table stores vendor group definitions within the Vendor Management (VM) module. Each record defines",
      "passed": true,
      "score": 0.7000000000000001,
      "errors": [],
      "warnings": [
        "Missing expected keyword: 'master'",
        "Missing expected keyword: 'shared'",
        "Missing expected keyword: 'company'"
      ],
      "latency_ms": 26299.656629562378
    },
    {
      "test_id": "schema_009",
      "category": "schema",
      "question": "What company column does JCCD use?",
      "response": "The company column in JCCD is JCCo.",
      "passed": true,
      "score": 1,
      "errors": [],
      "warnings": [],
      "latency_ms": 670.9778308868408
    },
    {
      "test_id": "schema_010",
      "category": "schema",
      "question": "What columns are in GLAC?",
      "response": "The GLAC table (GL module) contains 20 columns.\n\n**Primary columns:** GLCo (bCompany), GLAcct (bGLAcct), Description (bDesc), AcctType (char), SubType (char), NormBal (char), InterfaceDetail (bYN), Active (bYN), SummaryAcct (bGLAcct), CashAccrual (char)\n\n**Additional columns:** CashOffAcct (bGLAcct), Notes (varchar), Part1 (varchar), Part2 (varchar), Part3 (varchar), Part4 (varchar), Part5 (varchar), Part6 (varchar), AllParts (varchar), CrossRefMemAcct (bGLAcct)\n\n**Primary Key:** Not defined\n\nTo",
      "passed": true,
      "score": 0.95,
      "errors": [],
      "warnings": [
        "SQL Warning: SQL may be missing company filter (APCo, JCCo, etc.)"
      ],
      "latency_ms": 9094.617128372192
    },
    {
      "test_id": "sql_001",
      "category": "sql_generation",
      "question": "Write SQL to get all unpaid AP invoices for company 1",
      "response": "```sql\nSELECT APCo, Mth, APTrans, Vendor, InvNum, InvDate, GrossAmt\nFROM APTH WITH (NOLOCK)\nWHERE APCo = 1\n  AND Status = 0\nORDER BY InvDate DESC\n```\n\nNote: WITH (NOLOCK) prevents blocking production transactions. Always filter by company column.",
      "passed": true,
      "score": 0.95,
      "errors": [],
      "warnings": [
        "SQL Warning: SQL may be missing company filter (APCo, JCCo, etc.)"
      ],
      "latency_ms": 3965.520143508911
    },
    {
      "test_id": "sql_002",
      "category": "sql_generation",
      "question": "Query all active jobs for JC company 5",
      "response": "```sql\nSELECT JCCo, Job, Description, Contract, JobStatus, BidNumber\nFROM JCJM WITH (NOLOCK)\nWHERE JCCo = 5\n  AND JobStatus = 1\nORDER BY JCCo\n```\n\nNote: WITH (NOLOCK) prevents blocking production transactions. Always include company filter (JCCo).",
      "passed": true,
      "score": 0.95,
      "errors": [],
      "warnings": [
        "SQL Warning: SQL may be missing company filter (APCo, JCCo, etc.)"
      ],
      "latency_ms": 3778.336524963379
    },
    {
      "test_id": "sql_003",
      "category": "sql_generation",
      "question": "Get vendor name and total invoiced amount",
      "response": "```sql\nSELECT APTH.Vendor, APVM.Name AS VendorName,\n  SUM(APTH.GrossAmt) AS TotalInvoiced\nFROM APTH WITH (NOLOCK)\nINNER JOIN APVM WITH (NOLOCK)\n  ON APTH.VendorGroup = APVM.VendorGroup AND APTH.Vendor = APVM.Vendor\nWHERE APTH.APCo = @APCo AND APTH.Mth = @Mth\nGROUP BY APTH.Vendor, APVM.Name\n```\n\nNote: WITH (NOLOCK) prevents blocking production transactions. Always filter by company column.",
      "passed": true,
      "score": 0.8999999999999999,
      "errors": [],
      "warnings": [
        "SQL Warning: SQL may be missing company filter (APCo, JCCo, etc.)",
        "SQL Warning: JOIN on 'APVM' may be incomplete (usually needs multiple key columns)"
      ],
      "latency_ms": 6226.2864112854
    },
    {
      "test_id": "sql_004",
      "category": "sql_generation",
      "question": "Find AP invoices over $10,000",
      "response": "```sql\nSELECT APCo, Vendor, InvNum, InvDate, GrossAmt\nFROM APTH WITH (NOLOCK)\nWHERE APCo = @APCo\n  AND GrossAmt > 10000\nORDER BY GrossAmt DESC\n```\n\nNote: Always use WITH (NOLOCK) for SELECT queries and filter by company column.",
      "passed": true,
      "score": 0.95,
      "errors": [],
      "warnings": [
        "SQL Warning: SQL may be missing company filter (APCo, JCCo, etc.)"
      ],
      "latency_ms": 3761.831283569336
    },
    {
      "test_id": "sql_005",
      "category": "sql_generation",
      "question": "List all GL accounts for company 1",
      "response": "All GL accounts for company 1:\n- GLCo (bCompany, not null)\n- GLAcct (bGLAcct, not null)\n- Description (bDesc, nullable)\n- AcctType (char, not null)\n- SubType (char, nullable)",
      "passed": true,
      "score": 0.7000000000000001,
      "errors": [],
      "warnings": [
        "Missing expected keyword: 'SELECT'",
        "Missing expected keyword: 'WITH'",
        "Missing expected keyword: 'NOLOCK'"
      ],
      "latency_ms": 2979.5007705688477
    },
    {
      "test_id": "sql_006",
      "category": "sql_generation",
      "question": "Get payroll timecards for employee 100",
      "response": "```sql\nSELECT PRCo, Mth, PRGroup, Employee, PaySeq, PostSeq\nFROM PRTB WITH (NOLOCK)\nWHERE PRCo = @PRCo\n  AND Employee = 100\nORDER BY PRCo\n```\n\nNote: WITH (NOLOCK) prevents blocking production transactions. Always filter by company column.",
      "passed": true,
      "score": 0.85,
      "errors": [],
      "warnings": [
        "Missing expected keyword: 'PRTH'",
        "SQL Warning: SQL may be missing company filter (APCo, JCCo, etc.)"
      ],
      "latency_ms": 3708.650827407837
    },
    {
      "test_id": "sql_007",
      "category": "sql_generation",
      "question": "Query AR transactions for customer group 1",
      "response": "```sql\nSELECT ARCo, Mth, ARTrans, ARTransType, Customer, CustGroup\nFROM ARTH WITH (NOLOCK)\nWHERE ARCo = @ARCo\n  AND CustGroup = 1\nORDER BY ARTrans\n```\n\nNote: WITH (NOLOCK) prevents blocking production transactions. Always include company filter (ARCo).",
      "passed": true,
      "score": 0.95,
      "errors": [],
      "warnings": [
        "SQL Warning: SQL may be missing company filter (APCo, JCCo, etc.)"
      ],
      "latency_ms": 3817.6701068878174
    },
    {
      "test_id": "sql_008",
      "category": "sql_generation",
      "question": "Get job costs by phase",
      "response": "```sql\nSELECT JCCo, Job, Phase, CostType, ActualCost\nFROM JCCD WITH (NOLOCK)\nWHERE JCCo = @JCCo\n  AND Phase = @Phase\nORDER BY CostType\n```\n\nNote: Always use WITH (NOLOCK) for SELECT queries and filter by company column.",
      "passed": true,
      "score": 0.95,
      "errors": [],
      "warnings": [
        "SQL Warning: SQL may be missing company filter (APCo, JCCo, etc.)"
      ],
      "latency_ms": 3858.7193489074707
    },
    {
      "test_id": "sql_009",
      "category": "sql_generation",
      "question": "List equipment for EM company 1",
      "response": "Equipment in EM Company 1:\n- EMCo (bCompany, not null)\n- Equipment (bEquip, not null)\n- Location (varchar, nullable)\n- Type (char, not null)\n- Department (bDept, nullable)",
      "passed": true,
      "score": 0.6000000000000001,
      "errors": [],
      "warnings": [
        "Missing expected keyword: 'SELECT'",
        "Missing expected keyword: 'EMEM'",
        "Missing expected keyword: 'WITH'",
        "Missing expected keyword: 'NOLOCK'"
      ],
      "latency_ms": 2824.0764141082764
    },
    {
      "test_id": "sql_010",
      "category": "sql_generation",
      "question": "Get purchase orders pending approval",
      "response": "```sql\nSELECT POCo, PO, VendorGroup, Vendor, Description, TotalAmt\nFROM POHD WITH (NOLOCK)\nWHERE POCo = @POCo\n  AND Status = 0\nORDER BY PO\n```\n\nNote: Always use WITH (NOLOCK) for SELECT queries and filter by company column.",
      "passed": true,
      "score": 0.95,
      "errors": [],
      "warnings": [
        "SQL Warning: SQL may be missing company filter (APCo, JCCo, etc.)"
      ],
      "latency_ms": 3525.5844593048096
    },
    {
      "test_id": "sql_011",
      "category": "sql_generation",
      "question": "Find all invoices from January 2024",
      "response": "```sql\nSELECT APCo, Mth, APTrans, Vendor, InvNum, InvDate, GrossAmt, Status\nFROM APTH WITH (NOLOCK)\nWHERE APCo = @APCo\n  AND Mth = '2024-01'\nORDER BY InvDate DESC\n```\n\nNote: Always use WITH (NOLOCK) for SELECT queries and filter by company column.",
      "passed": true,
      "score": 0.85,
      "errors": [],
      "warnings": [
        "Missing expected keyword: '2024-01-01'",
        "SQL Warning: SQL may be missing company filter (APCo, JCCo, etc.)"
      ],
      "latency_ms": 4559.717655181885
    },
    {
      "test_id": "sql_012",
      "category": "sql_generation",
      "question": "Get subcontract commitments for a job",
      "response": "```sql\nSELECT SLCo, SL, Vendor, Description, OrigDate, Status\nFROM SLHD WITH (NOLOCK)\nWHERE SLCo = @SLCo\n  AND SL = @SL\nORDER BY SL\n```\n\nNote: WITH (NOLOCK) prevents blocking production transactions. Always filter by company column.",
      "passed": true,
      "score": 0.85,
      "errors": [],
      "warnings": [
        "Missing expected keyword: 'Job'",
        "SQL Warning: SQL may be missing company filter (APCo, JCCo, etc.)"
      ],
      "latency_ms": 3715.8775329589844
    },
    {
      "test_id": "halluc_001",
      "category": "hallucination",
      "question": "What columns are in the Invoice table?",
      "response": "There is no table or view named 'Invoice' in Viewpoint Vista. The database uses module-prefixed names like APTH (AP Transaction Header) or JCJM (JC Job Master).\n\nYou may be looking for:\n- APTH (AP Transaction Header)\n- vrvAP_MVAllInvoices\n- APTL (AP Transaction Lines)",
      "passed": false,
      "score": 0.6000000000000001,
      "errors": [
        "Missing expected keyword: 'not exist'",
        "Missing expected keyword: 'doesn't exist'"
      ],
      "warnings": [],
      "latency_ms": 3965.395212173462
    },
    {
      "test_id": "halluc_002",
      "category": "hallucination",
      "question": "Query the Customers table",
      "response": "I cannot write a query for 'Customers' because this table does not exist in Viewpoint Vista.\n\nYou may be looking for:\n- ARCM (AR Customer Master)\n\nPlease specify the correct Viewpoint table name.",
      "passed": false,
      "score": 0.8,
      "errors": [
        "Missing expected keyword: 'doesn't exist'"
      ],
      "warnings": [],
      "latency_ms": 2283.2186222076416
    },
    {
      "test_id": "halluc_003",
      "category": "hallucination",
      "question": "What is the UserPreferences table?",
      "response": "There is no table or view named 'UserPreferences' in Viewpoint Vista. The database uses module-prefixed names like APTH (AP Transaction Header) or JCJM (JC Job Master).",
      "passed": false,
      "score": 0.6000000000000001,
      "errors": [
        "Missing expected keyword: 'not exist'",
        "Missing expected keyword: 'doesn't exist'"
      ],
      "warnings": [],
      "latency_ms": 2181.917428970337
    },
    {
      "test_id": "halluc_004",
      "category": "hallucination",
      "question": "Describe the Payments table structure",
      "response": "The table 'Payments' does not exist in Viewpoint Vista. Viewpoint uses specific naming conventions with module prefixes (AP, AR, JC, GL, PR, etc.).",
      "passed": false,
      "score": 0.4000000000000001,
      "errors": [
        "Missing expected keyword: 'doesn't exist'",
        "Missing expected keyword: 'APCM'",
        "Missing expected keyword: 'check'"
      ],
      "warnings": [],
      "latency_ms": 1948.4765529632568
    },
    {
      "test_id": "halluc_005",
      "category": "hallucination",
      "question": "How do I join Invoice and Customer?",
      "response": "Neither 'Invoice' nor 'Customer' exist in Viewpoint Vista. Viewpoint tables use module prefixes. For example:\n- AP tables: APTH, APTL, APVM\n- JC tables: JCJM, JCCD, JCCI\n\nPlease specify the correct Viewpoint table names.",
      "passed": false,
      "score": 0.10000000000000009,
      "errors": [
        "Missing expected keyword: 'not exist'",
        "Missing expected keyword: 'doesn't exist'",
        "Failed to refuse/correct - possible hallucination"
      ],
      "warnings": [],
      "latency_ms": 3460.7787132263184
    },
    {
      "test_id": "halluc_006",
      "category": "hallucination",
      "question": "What columns are in the SalesData table?",
      "response": "There is no table or view named 'SalesData' in Viewpoint Vista. The database uses module-prefixed names like APTH (AP Transaction Header) or JCJM (JC Job Master).",
      "passed": false,
      "score": 0.6000000000000001,
      "errors": [
        "Missing expected keyword: 'not exist'",
        "Missing expected keyword: 'doesn't exist'"
      ],
      "warnings": [],
      "latency_ms": 2282.992124557495
    },
    {
      "test_id": "halluc_007",
      "category": "hallucination",
      "question": "Query the Orders table for pending orders",
      "response": "I cannot directly query 'Orders' because this table does not exist in Viewpoint Vista.\n\nPlease specify the correct Viewpoint table name.",
      "passed": false,
      "score": 0.6000000000000001,
      "errors": [
        "Missing expected keyword: 'doesn't exist'",
        "Missing expected keyword: 'POHD'"
      ],
      "warnings": [],
      "latency_ms": 1567.460060119629
    },
    {
      "test_id": "halluc_008",
      "category": "hallucination",
      "question": "What is the EmployeeMaster table?",
      "response": "There is no table or view named 'EmployeeMaster' in Viewpoint Vista. The database uses module-prefixed names like APTH (AP Transaction Header) or JCJM (JC Job Master).\n\nYou may be looking for:\n- PREH (PR Employee Header)",
      "passed": false,
      "score": 0.6000000000000001,
      "errors": [
        "Missing expected keyword: 'not exist'",
        "Missing expected keyword: 'doesn't exist'"
      ],
      "warnings": [],
      "latency_ms": 2898.348093032837
    },
    {
      "test_id": "halluc_009",
      "category": "hallucination",
      "question": "Describe the TransactionHistory table",
      "response": "The table 'TransactionHistory' does not exist in Viewpoint Vista. Viewpoint uses specific naming conventions with module prefixes (AP, AR, JC, GL, PR, etc.).",
      "passed": false,
      "score": 0.8,
      "errors": [
        "Missing expected keyword: 'doesn't exist'"
      ],
      "warnings": [],
      "latency_ms": 1896.4316844940186
    },
    {
      "test_id": "halluc_010",
      "category": "hallucination",
      "question": "How do I query the Project table?",
      "response": "I cannot write a query for 'Project' because this table does not exist in Viewpoint Vista.\n\nPlease specify the correct Viewpoint table name.",
      "passed": false,
      "score": 0.6000000000000001,
      "errors": [
        "Missing expected keyword: 'doesn't exist'",
        "Missing expected keyword: 'JCJM'"
      ],
      "warnings": [],
      "latency_ms": 1635.0691318511963
    },
    {
      "test_id": "join_001",
      "category": "join",
      "question": "How do I join APTH and APTL?",
      "response": "To correctly join APTH and APTL, you must include all key columns:\n\n```sql\nSELECT *\nFROM APTH WITH (NOLOCK)\nINNER JOIN APTL WITH (NOLOCK)\n  ON APTH.APCo = APTL.APCo AND APTH.Mth = APTL.Mth AND APTH.APTrans = APTL.APTrans\n```\n\nIncomplete JOIN like `APTH.APTrans = APTL.APTrans` would be incorrect because: Missing APCo and Mth in JOIN.",
      "passed": true,
      "score": 1,
      "errors": [],
      "warnings": [],
      "latency_ms": 5939.944744110107
    },
    {
      "test_id": "join_002",
      "category": "join",
      "question": "How do I join APTH with APVM?",
      "response": "To correctly join APTH with APVM, you must include all key columns:\n\n```sql\nSELECT *\nFROM APTH WITH (NOLOCK)\nINNER JOIN APVM WITH (NOLOCK)\n  ON APTH.VendorGroup = APVM.VendorGroup AND APTH.Vendor = APVM.Vendor\n```\n\nIncomplete JOIN like `APTH.Vendor = APVM.Vendor` would be incorrect because: Missing VendorGroup in JOIN.",
      "passed": true,
      "score": 0.95,
      "errors": [],
      "warnings": [
        "SQL Warning: JOIN on 'APVM' may be incomplete (usually needs multiple key columns)"
      ],
      "latency_ms": 4820.9638595581055
    },
    {
      "test_id": "join_003",
      "category": "join",
      "question": "How do I join JCJM with JCCD?",
      "response": "To correctly join JCJM with JCCD, you must include all key columns:\n\n```sql\nSELECT *\nFROM JCJM WITH (NOLOCK)\nINNER JOIN JCCD WITH (NOLOCK)\n  ON JCJM.JCCo = JCCD.JCCo AND JCJM.Job = JCCD.Job\n```\n\nIncomplete JOIN like `JCJM.Job = JCCD.Job` would be incorrect because: Missing JCCo in JOIN.",
      "passed": true,
      "score": 1,
      "errors": [],
      "warnings": [],
      "latency_ms": 4836.69376373291
    },
    {
      "test_id": "join_004",
      "category": "join",
      "question": "What columns link ARTH to ARCM?",
      "response": "The ARTH table has 37 columns, including ARCo, Mth, ARTrans, ARTransType, CustGroup, Customer, CustRef, CustPO, RecType, JCCo, Contract, Invoice, CheckNo, Source, MSCo, TransDate, DueDate, DiscDate, CheckDate, Description... (43 total)\nThe ARCM table has 55 columns, including CustGroup, Customer, Name, SortName, TempYN, Phone, Fax, EMail, URL, Contact, ContactExt, Address, City, State, Zip, Address2, BillAddress, BillCity, BillState... (39 total)\n\nTo link ARTH to ARCM:\n\n```sql\nFROM ARTH WITH (NO",
      "passed": true,
      "score": 0.95,
      "errors": [],
      "warnings": [
        "SQL Warning: JOIN on 'ARCM' may be incomplete (usually needs multiple key columns)"
      ],
      "latency_ms": 11025.676965713501
    },
    {
      "test_id": "join_005",
      "category": "join",
      "question": "How do I join PRTH with PREH?",
      "response": "To correctly join PRTH with PREH, you must include all key columns:\n\n```sql\nSELECT *\nFROM PRTH WITH (NOLOCK)\nINNER JOIN PREH WITH (NOLOCK)\n  ON PRTH.PRCo = PREH.PRCo AND PRTH.Employee = PREH.Employee\n```\n\nIncomplete JOIN like `PRTH.Employee = PREH.Employee` would be incorrect because: Missing PRCo in JOIN.",
      "passed": true,
      "score": 1,
      "errors": [],
      "warnings": [],
      "latency_ms": 4453.517913818359
    },
    {
      "test_id": "error_001",
      "category": "error_correction",
      "question": "Fix this query: SELECT * FROM bAPTH WHERE APCo = 1",
      "response": "**Issues found:**\n- Missing WITH (NOLOCK)\n- Using SELECT *\n\n**Corrected SQL:**\n```sql\nSELECT APCo, Mth, APTrans, VendorGroup, Vendor\nFROM bAPTH WITH (NOLOCK)\nWHERE APCo = @APCo\n```\n\n**Best practices:**\n- Always use WITH (NOLOCK) for SELECT queries\n- Always filter by company column (APCo)\n- Use full table names, not aliases\n- Match exact column case\n- Specify columns instead of SELECT *",
      "passed": true,
      "score": 0.85,
      "errors": [],
      "warnings": [
        "Missing expected keyword: 'view'",
        "SQL Warning: SQL may be missing company filter (APCo, JCCo, etc.)"
      ],
      "latency_ms": 6050.449371337891
    },
    {
      "test_id": "error_002",
      "category": "error_correction",
      "question": "Fix this query: SELECT apco, vendor FROM APTH",
      "response": "**Issues found:**\n- Missing WITH (NOLOCK)\n- Wrong column case (apco should be APCo)\n\n**Corrected SQL:**\n```sql\nSELECT APCo, VendorGroup, Vendor, InvId, APRef\nFROM APTH WITH (NOLOCK)\nWHERE APCo = @APCo\n```\n\n**Best practices:**\n- Always use WITH (NOLOCK) for SELECT queries\n- Always filter by company column (APCo)\n- Use full table names, not aliases\n- Match exact column case\n- Specify columns instead of SELECT *",
      "passed": true,
      "score": 0.95,
      "errors": [],
      "warnings": [
        "SQL Warning: SQL may be missing company filter (APCo, JCCo, etc.)"
      ],
      "latency_ms": 6093.83225440979
    },
    {
      "test_id": "error_003",
      "category": "error_correction",
      "question": "Fix this query: SELECT a.* FROM APTH a WHERE a.APCo = 1",
      "response": "**Issues found:**\n- Missing WITH (NOLOCK)\n- Using table alias 'a'\n\n**Corrected SQL:**\n```sql\nSELECT APCo, Mth, APTrans, VendorGroup, Vendor\nFROM APTH WITH (NOLOCK)\nWHERE APCo = @APCo\n```\n\n**Best practices:**\n- Always use WITH (NOLOCK) for SELECT queries\n- Always filter by company column (APCo)\n- Use full table names, not aliases\n- Match exact column case\n- Specify columns instead of SELECT *",
      "passed": true,
      "score": 0.95,
      "errors": [],
      "warnings": [
        "SQL Warning: SQL may be missing company filter (APCo, JCCo, etc.)"
      ],
      "latency_ms": 6075.505971908569
    },
    {
      "test_id": "error_004",
      "category": "error_correction",
      "question": "Fix this query: SELECT * FROM APTH WHERE Mth = '2024-01'",
      "response": "**Issues found:**\n- Missing WITH (NOLOCK)\n- Using SELECT *\n\n**Corrected SQL:**\n```sql\nSELECT APCo, Mth, APTrans, VendorGroup, Vendor\nFROM APTH WITH (NOLOCK)\nWHERE APCo = @APCo\n```\n\n**Best practices:**\n- Always use WITH (NOLOCK) for SELECT queries\n- Always filter by company column (APCo)\n- Use full table names, not aliases\n- Match exact column case\n- Specify columns instead of SELECT *",
      "passed": false,
      "score": 0.55,
      "errors": [],
      "warnings": [
        "Missing expected keyword: '2024-01-01'",
        "Missing expected keyword: 'first'",
        "Missing expected keyword: 'day'",
        "Missing expected keyword: 'month'",
        "SQL Warning: SQL may be missing company filter (APCo, JCCo, etc.)"
      ],
      "latency_ms": 5468.478679656982
    },
    {
      "test_id": "error_005",
      "category": "error_correction",
      "question": "Fix this query: SELECT * FROM APTH JOIN APTL ON APTH.APTrans = APTL.APTrans",
      "response": "**Issues found:**\n- Missing WITH (NOLOCK)\n- Using JOIN clause instead of WHERE clause\n- Using table aliases \"APTH\" and \"APTL\"\n\n**Corrected SQL:**\n```sql\nSELECT APTH.APCo, APTH.Mth, APTH.APTrans, APTL.APLine, APTL.LineType\nFROM APTH WITH (NOLOCK)\nINNER JOIN APTL WITH (NOLOCK)\n  ON APTH.APCo = APTL.APCo AND APTH.Mth = APTL.Mth AND APTH.APTrans = APTL.APTrans\nWHERE APTH.APCo = @APCo\n```\n\n**Best practices:**\n- Always use WITH (NOLOCK) for SELECT queries\n- Always filter by company column (APCo)\n- Use",
      "passed": true,
      "score": 0.85,
      "errors": [],
      "warnings": [
        "Missing expected keyword: 'incomplete'",
        "SQL Warning: SQL may be missing company filter (APCo, JCCo, etc.)"
      ],
      "latency_ms": 9341.907024383545
    },
    {
      "test_id": "biz_001",
      "category": "business_logic",
      "question": "What status codes indicate an unpaid AP invoice?",
      "response": "Unpaid AP invoices have status code 1 (open/hold).",
      "passed": true,
      "score": 0.9,
      "errors": [],
      "warnings": [
        "Missing expected keyword: '0'"
      ],
      "latency_ms": 739.7241592407227
    },
    {
      "test_id": "biz_002",
      "category": "business_logic",
      "question": "How does batch processing work in AP?",
      "response": "# AP Batch Processing Reference\n\n**Status:** AUTHORITATIVE - Generated from schema metadata\n**Generated:** 2025-12-23 19:46\n**Source:** `Viewpoint_Database/_Metadata/CSVs/columns.csv`\n\n---\n\n## üéØ What Is Batch Processing?\n\n**Batches are Viewpoint's mechanism for staging transactions before posting.**\n\n```\n‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê\n‚îÇ  User Entry ‚îÇ ‚îÄ‚îÄ‚ñ∂ ‚îÇ Batch Table ‚îÇ ‚îÄ‚îÄ‚ñ∂ ‚îÇ Posted Table‚îÇ\n‚îÇ  (bAPHB)    ‚îÇ     ‚îÇ  Validation ‚îÇ     ‚îÇ   (APTH)    ‚îÇ\n‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ",
      "passed": true,
      "score": 0.8,
      "errors": [],
      "warnings": [
        "Missing expected keyword: 'APTB'",
        "Missing expected keyword: 'header'"
      ],
      "latency_ms": 25336.0857963562
    },
    {
      "test_id": "biz_003",
      "category": "business_logic",
      "question": "What is the difference between ActualCost and OrigEstCost in JCCD?",
      "response": "The 'ActualCost' column in JCCD has data type numeric.\n\nThe 'OrigEstCost' column in JCCD has data type numeric.\n\nThe difference is: ActualCost - OrigEstCost",
      "passed": true,
      "score": 0.7000000000000001,
      "errors": [],
      "warnings": [
        "Missing expected keyword: 'original'",
        "Missing expected keyword: 'estimate'",
        "Missing expected keyword: 'budget'"
      ],
      "latency_ms": 2651.639461517334
    },
    {
      "test_id": "biz_004",
      "category": "business_logic",
      "question": "How are vendors shared across companies?",
      "response": "Vendors can be shared across companies through vendor groups in the AP module. A vendor group holds related vendors (company-specific via VendorGroupID or global via HQCo) and is used for cross-company transactions.",
      "passed": true,
      "score": 0.9,
      "errors": [],
      "warnings": [
        "Missing expected keyword: 'master'"
      ],
      "latency_ms": 2450.692892074585
    },
    {
      "test_id": "biz_005",
      "category": "business_logic",
      "question": "When should I use vrv* views vs custom SQL?",
      "response": "Custom SQL is preferred for:\n- Simple aggregations (GROUP BY)\n- Complex joins (multiple tables)\n- Subqueries\n- Performance-critical queries\n\nvrv* views are better for:\n- Reporting-only queries\n- Ad-hoc analysis\n- Parameterized reports\n- BI tools\n\nAlways use vrv* views when available for reporting.",
      "passed": true,
      "score": 0.7000000000000001,
      "errors": [],
      "warnings": [
        "Missing expected keyword: 'Crystal'",
        "Missing expected keyword: 'optimized'",
        "Missing expected keyword: 'validated'"
      ],
      "latency_ms": 3564.4447803497314
    }
  ],
  "summary": "\nValidation Summary\n==================\nTotal Tests: 47\nPassed: 36 (76.6%)\nFailed: 11 (23.4%)\nOverall Score: 0.80\n\nCategory Scores:\n  business_logic: 0.80\n  error_correction: 0.83\n  hallucination: 0.57\n  join: 0.98\n  schema: 0.86\n  sql_generation: 0.87\n"
}